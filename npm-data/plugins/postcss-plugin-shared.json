{
	"_id": "postcss-plugin-shared",
	"_rev": "2-d9229a47cf9ce42f86cd38de3684d1d7",
	"name": "postcss-plugin-shared",
	"dist-tags": {
		"latest": "1.0.0"
	},
	"versions": {
		"0.0.0": {
			"name": "postcss-plugin-shared",
			"version": "0.0.0",
			"keywords": [
				"postcss",
				"postcss-plugin",
				"shared",
				"utils"
			],
			"author": {
				"name": "ice breaker",
				"email": "1324318532@qq.com"
			},
			"license": "MIT",
			"_id": "postcss-plugin-shared@0.0.0",
			"maintainers": [
				{
					"name": "icebreaker",
					"email": "1324318532@qq.com"
				}
			],
			"homepage": "https://github.com/sonofmagic/postcss-plugins#readme",
			"bugs": {
				"url": "https://github.com/sonofmagic/postcss-plugins/issues"
			},
			"dist": {
				"shasum": "c679968cf97543e74f477310f1e05ef1f2d6f7ba",
				"tarball": "https://registry.npmjs.org/postcss-plugin-shared/-/postcss-plugin-shared-0.0.0.tgz",
				"fileCount": 8,
				"integrity": "sha512-Nk1xxbVqmCt9tY+rVDVtEmZ0XV/a9brU6Y0JuFeW6xPgFNsU/TOwYpHlkkLwAWzd00SFnz8BjkfQWPt6Z06Slg==",
				"signatures": [
					{
						"sig": "MEUCIAq7O7dS4JQ+6Xuxkcn8KkmoMyH8qVAwNiVwBH8qDBODAiEA+4osRunh3wsJMwMajuTu0LroSof71+0BzU3UvMZMO2I=",
						"keyid": "SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"
					}
				],
				"unpackedSize": 18025
			},
			"main": "./dist/index.cjs",
			"_from": "file:postcss-plugin-shared-0.0.0.tgz",
			"types": "./dist/index.d.ts",
			"module": "./dist/index.mjs",
			"exports": {
				".": {
					"types": "./dist/index.d.ts",
					"import": "./dist/index.mjs",
					"require": "./dist/index.cjs"
				}
			},
			"scripts": {
				"dev": "tsup --watch --sourcemap",
				"lint": "eslint .",
				"build": "tsup",
				"lint:fix": "eslint . --fix"
			},
			"_npmUser": {
				"name": "icebreaker",
				"email": "1324318532@qq.com"
			},
			"_resolved": "/private/var/folders/rm/spk31h7x5bdbbfmncmrf6yw00000gn/T/edecf3077d54e9d9c7f241a95cfb5cae/postcss-plugin-shared-0.0.0.tgz",
			"_integrity": "sha512-Nk1xxbVqmCt9tY+rVDVtEmZ0XV/a9brU6Y0JuFeW6xPgFNsU/TOwYpHlkkLwAWzd00SFnz8BjkfQWPt6Z06Slg==",
			"repository": {
				"url": "git+https://github.com/sonofmagic/postcss-plugins.git",
				"type": "git",
				"directory": "packages/postcss-plugin-shared"
			},
			"_npmVersion": "10.9.4",
			"description": "Shared utilities for postcss-plugins monorepo packages.",
			"directories": {},
			"sideEffects": false,
			"_nodeVersion": "22.21.1",
			"dependencies": {
				"defu": "^6.1.4"
			},
			"_hasShrinkwrap": false,
			"peerDependencies": {
				"postcss": "^8"
			},
			"_npmOperationalInternal": {
				"tmp": "tmp/postcss-plugin-shared_0.0.0_1766038486180_0.024160477552293225",
				"host": "s3://npm-registry-packages-npm-production"
			}
		},
		"1.0.0": {
			"name": "postcss-plugin-shared",
			"version": "1.0.0",
			"description": "Shared utilities for postcss-plugins monorepo packages.",
			"author": {
				"name": "ice breaker",
				"email": "1324318532@qq.com"
			},
			"license": "MIT",
			"repository": {
				"type": "git",
				"url": "git+https://github.com/sonofmagic/postcss-plugins.git",
				"directory": "packages/postcss-plugin-shared"
			},
			"bugs": {
				"url": "https://github.com/sonofmagic/postcss-plugins/issues"
			},
			"keywords": [
				"postcss",
				"postcss-plugin",
				"shared",
				"utils"
			],
			"sideEffects": false,
			"exports": {
				".": {
					"types": "./dist/index.d.ts",
					"import": "./dist/index.mjs",
					"require": "./dist/index.cjs"
				}
			},
			"peerDependencies": {
				"postcss": "^8"
			},
			"dependencies": {
				"defu": "^6.1.4"
			},
			"scripts": {
				"dev": "tsup --watch --sourcemap",
				"build": "tsup",
				"lint": "eslint .",
				"lint:fix": "eslint . --fix"
			},
			"main": "./dist/index.cjs",
			"module": "./dist/index.mjs",
			"types": "./dist/index.d.ts",
			"_id": "postcss-plugin-shared@1.0.0",
			"homepage": "https://github.com/sonofmagic/postcss-plugins#readme",
			"_integrity": "sha512-3x83BXvFXlbtIaD/GC4C2uZQ+UmGwh1uYCm4DjQTEjDv8HrrBmZWZH968W+Shq/vxP+amsH08OafVt8aVzqL2w==",
			"_resolved": "/tmp/7963e38ebe5806825eb4543c689819df/postcss-plugin-shared-1.0.0.tgz",
			"_from": "file:postcss-plugin-shared-1.0.0.tgz",
			"_nodeVersion": "24.12.0",
			"_npmVersion": "11.6.2",
			"dist": {
				"integrity": "sha512-3x83BXvFXlbtIaD/GC4C2uZQ+UmGwh1uYCm4DjQTEjDv8HrrBmZWZH968W+Shq/vxP+amsH08OafVt8aVzqL2w==",
				"shasum": "ffc5c7b21cf1f50acc62c4d75a9aed65ce84ae9f",
				"tarball": "https://registry.npmjs.org/postcss-plugin-shared/-/postcss-plugin-shared-1.0.0.tgz",
				"fileCount": 8,
				"unpackedSize": 28162,
				"attestations": {
					"url": "https://registry.npmjs.org/-/npm/v1/attestations/postcss-plugin-shared@1.0.0",
					"provenance": {
						"predicateType": "https://slsa.dev/provenance/v1"
					}
				},
				"signatures": [
					{
						"keyid": "SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U",
						"sig": "MEQCIHf0KrJwS2lI6EuLt34d1iERZUKc1u/lRi8DkRRFj4crAiAXbtZDfEgcDoa+0bX55oPFFplOiA1Ph7aIdT8yOS715w=="
					}
				]
			},
			"_npmUser": {
				"name": "GitHub Actions",
				"email": "npm-oidc-no-reply@github.com",
				"trustedPublisher": {
					"id": "github",
					"oidcConfigId": "oidc:06df814c-ba6b-4f93-abc1-f3ce8680d410"
				}
			},
			"directories": {},
			"maintainers": [
				{
					"name": "icebreaker",
					"email": "1324318532@qq.com"
				}
			],
			"_npmOperationalInternal": {
				"host": "s3://npm-registry-packages-npm-production",
				"tmp": "tmp/postcss-plugin-shared_1.0.0_1766047843723_0.3492887876252022"
			},
			"_hasShrinkwrap": false
		}
	},
	"time": {
		"created": "2025-12-18T06:14:46.179Z",
		"modified": "2025-12-18T08:50:44.319Z",
		"0.0.0": "2025-12-18T06:14:46.323Z",
		"1.0.0": "2025-12-18T08:50:43.877Z"
	},
	"bugs": {
		"url": "https://github.com/sonofmagic/postcss-plugins/issues"
	},
	"author": {
		"name": "ice breaker",
		"email": "1324318532@qq.com"
	},
	"license": "MIT",
	"homepage": "https://github.com/sonofmagic/postcss-plugins#readme",
	"keywords": [
		"postcss",
		"postcss-plugin",
		"shared",
		"utils"
	],
	"repository": {
		"type": "git",
		"url": "git+https://github.com/sonofmagic/postcss-plugins.git",
		"directory": "packages/postcss-plugin-shared"
	},
	"description": "Shared utilities for postcss-plugins monorepo packages.",
	"maintainers": [
		{
			"name": "icebreaker",
			"email": "1324318532@qq.com"
		}
	],
	"readme": "# postcss-plugin-shared\n\n[English](./README.md) | 简体中文\n\n`postcss-plugin-shared` 是 `postcss-plugins` monorepo 内部多个 PostCSS 插件之间复用的公共工具包，主要用于消除重复实现（配置合并、选择器黑名单、声明去重、exclude 匹配、单位正则与数值处理等）。\n\n> 设计目标：**小而稳定、无副作用、可在多个插件中复用**。该包不包含具体的单位换算逻辑（例如 rem→px 的公式），只提供通用能力。\n\n## 安装 / 使用方式\n\n### 在本仓库（pnpm workspace）中\n\n本仓库内建议使用 workspace 依赖：\n\n```jsonc\n// packages/your-plugin/package.json\n{\n  \"dependencies\": {\n    \"postcss-plugin-shared\": \"workspace:^\"\n  }\n}\n```\n\n然后在插件代码中直接引用：\n\n```ts\nimport { createExcludeMatcher, remRegex } from 'postcss-plugin-shared'\n```\n\n### 在仓库外使用\n\n如果你把该包发布到了 npm，则可以使用常规安装方式（示例）：\n\n```bash\npnpm add postcss-plugin-shared\n```\n\n该包声明了 `postcss` 为 `peerDependencies`（`^8`）。\n\n## 导出内容（Exports）\n\n入口：`packages/postcss-plugin-shared/src/index.ts`\n\n- `mergeOptions`：基于 `defu` 的 options 合并工具（数组采用“覆盖”策略）\n- `createConfigGetter`：基于 `mergeOptions` 生成 `getConfig(options?)` 的工厂函数\n- `toFixed`：稳定的小数处理（避免 `-0`/精度噪声）\n- `createUnitRegex`：可配置单位/跳过规则的通用单位正则工厂\n- `remRegex` / `pxRegex`：用于替换 rem/px 的通用正则（排除字符串字面量、`url()`、`var()`）\n- `blacklistedSelector`：选择器黑名单匹配（string 包含 / RegExp 匹配）\n- `maybeBlacklistedSelector`：与 `blacklistedSelector` 逻辑一致，但 selector 非字符串时返回 `undefined`\n- `createPropListMatcher`：根据 propList 生成属性匹配函数（支持 `*` 通配）\n- `createAdvancedPropListMatcher`：支持高级 `propList` 语法的属性匹配器（string[]，通配符 + 取反）\n- `createExcludeMatcher`：根据 exclude 生成文件路径排除函数（数组或函数）\n- `declarationExists`：用于检测某 rule/decls 中是否已存在相同 `prop/value`，避免重复注入\n\n## API 说明\n\n### `mergeOptions(options, defaults)`\n\n用于把用户配置与默认配置合并，行为特点：\n\n- 对象字段按 `defu` 语义合并（仅在 `options` 未提供时回退到 `defaults`）\n- **数组字段采用覆盖策略**：如果 `options.someArray` 与 `defaults.someArray` 都是数组，则使用 `options.someArray` 覆盖\n\n```ts\nimport { mergeOptions } from 'postcss-plugin-shared'\n\ninterface Options {\n  propList: string[]\n  unitPrecision: number\n}\n\nconst defaults: Options = { propList: ['*'], unitPrecision: 5 }\nconst resolved = mergeOptions<Options>({ propList: ['font-size'] }, defaults)\n// resolved.propList === ['font-size']\n```\n\n### `createConfigGetter(defaults)`\n\n用于生成一个类型友好的 `getConfig(options?)`：\n\n```ts\nimport { createConfigGetter } from 'postcss-plugin-shared'\n\nconst defaultOptions = { rootValue: 16, propList: ['*'] as string[] }\nexport const getConfig = createConfigGetter(defaultOptions)\n```\n\n### `toFixed(number, precision)`\n\n对数值进行稳定四舍五入：\n\n- `number === 0` 时直接返回 `0`\n- 保留符号（支持负数）\n- 使用 `Number.EPSILON` 降低浮点误差影响\n\n```ts\nimport { toFixed } from 'postcss-plugin-shared'\n\ntoFixed(1.005, 2) // 1.01\ntoFixed(0, 5) // 0\n```\n\n### `createUnitRegex(options)`\n\n用于构建单位替换用的全局正则，并可配置“跳过规则”：\n\n- 捕获组 1 为数值部分\n- 默认会跳过：引号字符串、`url(...)`、`var(...)`\n\n```ts\nimport { createUnitRegex } from 'postcss-plugin-shared'\n\nconst re = createUnitRegex({ units: ['px', 'rpx'], ignoreCase: true })\n```\n\n### `remRegex` / `pxRegex`\n\n用于 `String.prototype.replace` 的全局正则，匹配目标单位，并尽量避免误替换：\n\n- 排除双引号字符串 `\"...\"`、单引号字符串 `'...'`\n- 排除 `url(...)`\n- 排除 `var(...)`\n- 捕获组 1 为数值部分（例如 `1.25`）\n\n### `blacklistedSelector(blacklist, selector?)`\n\n判断当前 `selector` 是否命中黑名单：\n\n- `blacklist` 支持 `string | RegExp`\n- `selector` 非字符串时返回 `false`\n\n### `maybeBlacklistedSelector(blacklist, selector?)`\n\n与 `blacklistedSelector` 一致，但当 `selector` 不是字符串时返回 `undefined`（方便调用方区分“未提供 selector”与“未命中”）。\n\n### `createPropListMatcher(propList)`\n\n生成一个 `(prop: string) => boolean` 的匹配器，用于快速判断某个 CSS 属性是否需要处理。\n\n### `createAdvancedPropListMatcher(propList)`\n\n用于 `string[]` 的高级 `propList` 匹配器（兼容 `postcss-pxtrans` 的写法）：\n\n- `*`：匹配所有属性\n- `foo`：精确匹配\n- `foo*`：前缀匹配\n- `*foo`：后缀匹配\n- `*foo*`：包含匹配\n- `!pattern`：取反（黑名单）\n\n### `createExcludeMatcher(exclude)`\n\n生成一个 `(filepath?: string) => boolean` 的排除函数。\n\n### `declarationExists(decls, prop, value)`\n\n用于避免在同一个规则中生成重复声明（常用于 `replace: false` 时 `cloneAfter` 的去重判断）。\n",
	"readmeFilename": "README.zh-CN.md",
	"_downloads": [
		437,
		578,
		717,
		916,
		1053,
		1125,
		1401,
		1673,
		1942,
		2103,
		2230,
		2519,
		3100,
		3214,
		3043,
		3043,
		3142,
		3131,
		3128,
		3141
	]
}