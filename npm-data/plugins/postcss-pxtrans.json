{
	"_id": "postcss-pxtrans",
	"_rev": "2-226aec7cc187ab231557a4852d63bbf5",
	"name": "postcss-pxtrans",
	"dist-tags": {
		"latest": "1.0.0"
	},
	"versions": {
		"0.0.0": {
			"name": "postcss-pxtrans",
			"version": "0.0.0",
			"keywords": [
				"postcss",
				"postcss-plugin",
				"px",
				"rpx",
				"rem",
				"vw",
				"pxtransform"
			],
			"author": {
				"name": "ice breaker",
				"email": "1324318532@qq.com"
			},
			"license": "MIT",
			"_id": "postcss-pxtrans@0.0.0",
			"maintainers": [
				{
					"name": "icebreaker",
					"email": "1324318532@qq.com"
				}
			],
			"homepage": "https://github.com/sonofmagic/postcss-plugins#readme",
			"bugs": {
				"url": "https://github.com/sonofmagic/postcss-plugins/issues"
			},
			"dist": {
				"shasum": "34e2a808d056d069e69a6ddda6e20d7266cd0ade",
				"tarball": "https://registry.npmjs.org/postcss-pxtrans/-/postcss-pxtrans-0.0.0.tgz",
				"fileCount": 8,
				"integrity": "sha512-XNaZTMC6QDO5Rv8KVGq3dWtFfMmYeK8TrMMTxiTk1fp6qMe5xmwD+yRMG6gU6i5aaybRQfI5t2UHR6VMvDxDIA==",
				"signatures": [
					{
						"sig": "MEQCIDPl5LBuQxs1pVuleLK+ncfh8RNSXygxSHRFjc5wNlDLAiB0x3sJ4e7yPBvwMkSY8JzuXfZUb++ulSXXZtm+QTJB8Q==",
						"keyid": "SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"
					}
				],
				"unpackedSize": 42812
			},
			"main": "./dist/index.cjs",
			"_from": "file:postcss-pxtrans-0.0.0.tgz",
			"types": "./dist/index.d.ts",
			"module": "./dist/index.mjs",
			"exports": {
				".": {
					"types": "./dist/index.d.ts",
					"import": "./dist/index.mjs",
					"require": "./dist/index.cjs"
				}
			},
			"scripts": {
				"dev": "tsup --watch --sourcemap",
				"lint": "eslint .",
				"test": "vitest run",
				"bench": "vitest bench",
				"build": "tsup",
				"release": "pnpm publish",
				"lint:fix": "eslint . --fix",
				"test:dev": "vitest"
			},
			"_npmUser": {
				"name": "icebreaker",
				"email": "1324318532@qq.com"
			},
			"_resolved": "/private/var/folders/rm/spk31h7x5bdbbfmncmrf6yw00000gn/T/caa744bfe0cf25d83e6e7c3856996621/postcss-pxtrans-0.0.0.tgz",
			"_integrity": "sha512-XNaZTMC6QDO5Rv8KVGq3dWtFfMmYeK8TrMMTxiTk1fp6qMe5xmwD+yRMG6gU6i5aaybRQfI5t2UHR6VMvDxDIA==",
			"repository": {
				"url": "git+https://github.com/sonofmagic/postcss-plugins.git",
				"type": "git",
				"directory": "packages/postcss-pxtrans"
			},
			"_npmVersion": "10.9.4",
			"description": "PostCSS plugin that converts px units to rpx/rem/vw/px for multiple platforms.",
			"directories": {},
			"sideEffects": false,
			"_nodeVersion": "22.21.1",
			"dependencies": {
				"postcss-plugin-shared": "^0.0.0"
			},
			"_hasShrinkwrap": false,
			"peerDependencies": {
				"postcss": "^8"
			},
			"_npmOperationalInternal": {
				"tmp": "tmp/postcss-pxtrans_0.0.0_1766038501886_0.19374906030227912",
				"host": "s3://npm-registry-packages-npm-production"
			}
		},
		"1.0.0": {
			"name": "postcss-pxtrans",
			"version": "1.0.0",
			"description": "PostCSS plugin that converts px units to rpx/rem/vw/px for multiple platforms.",
			"author": {
				"name": "ice breaker",
				"email": "1324318532@qq.com"
			},
			"license": "MIT",
			"repository": {
				"type": "git",
				"url": "git+https://github.com/sonofmagic/postcss-plugins.git",
				"directory": "packages/postcss-pxtrans"
			},
			"bugs": {
				"url": "https://github.com/sonofmagic/postcss-plugins/issues"
			},
			"keywords": [
				"postcss",
				"postcss-plugin",
				"px",
				"rpx",
				"rem",
				"vw",
				"pxtransform"
			],
			"sideEffects": false,
			"exports": {
				".": {
					"types": "./dist/index.d.ts",
					"import": "./dist/index.mjs",
					"require": "./dist/index.cjs"
				}
			},
			"peerDependencies": {
				"postcss": "^8"
			},
			"dependencies": {
				"postcss-plugin-shared": "^1.0.0"
			},
			"scripts": {
				"dev": "tsup --watch --sourcemap",
				"build": "tsup",
				"test": "vitest run",
				"test:dev": "vitest",
				"bench": "vitest bench",
				"release": "pnpm publish",
				"lint": "eslint .",
				"lint:fix": "eslint . --fix"
			},
			"main": "./dist/index.cjs",
			"module": "./dist/index.mjs",
			"types": "./dist/index.d.ts",
			"_id": "postcss-pxtrans@1.0.0",
			"homepage": "https://github.com/sonofmagic/postcss-plugins#readme",
			"_integrity": "sha512-1AKXs+w/hor0EAmxCAa2ATfYKgzqey/rHTgJ6LvvpNsRyeV9hyVNczF3N1hSXcB5ruM4E3ezg8cf3W+W/GY4GA==",
			"_resolved": "/tmp/2fc82afaa4312c86bf0cd446d36f768a/postcss-pxtrans-1.0.0.tgz",
			"_from": "file:postcss-pxtrans-1.0.0.tgz",
			"_nodeVersion": "24.12.0",
			"_npmVersion": "11.6.2",
			"dist": {
				"integrity": "sha512-1AKXs+w/hor0EAmxCAa2ATfYKgzqey/rHTgJ6LvvpNsRyeV9hyVNczF3N1hSXcB5ruM4E3ezg8cf3W+W/GY4GA==",
				"shasum": "7df6ba96d1e31ea4fc5977b118877de3fe917f55",
				"tarball": "https://registry.npmjs.org/postcss-pxtrans/-/postcss-pxtrans-1.0.0.tgz",
				"fileCount": 8,
				"unpackedSize": 41859,
				"attestations": {
					"url": "https://registry.npmjs.org/-/npm/v1/attestations/postcss-pxtrans@1.0.0",
					"provenance": {
						"predicateType": "https://slsa.dev/provenance/v1"
					}
				},
				"signatures": [
					{
						"keyid": "SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U",
						"sig": "MEQCIGs/hFRUuKLxSK7NYat7babeBFKFo6FqyUKnnzEHV/v9AiAylq+LBs4IhdwYGa8pO5qBXreUeonCR9P6AO+cDZWVSA=="
					}
				]
			},
			"_npmUser": {
				"name": "GitHub Actions",
				"email": "npm-oidc-no-reply@github.com",
				"trustedPublisher": {
					"id": "github",
					"oidcConfigId": "oidc:c2e14f60-c13d-489f-bbad-644b0f59175a"
				}
			},
			"directories": {},
			"maintainers": [
				{
					"name": "icebreaker",
					"email": "1324318532@qq.com"
				}
			],
			"_npmOperationalInternal": {
				"host": "s3://npm-registry-packages-npm-production",
				"tmp": "tmp/postcss-pxtrans_1.0.0_1766047843550_0.45521876663483174"
			},
			"_hasShrinkwrap": false
		}
	},
	"time": {
		"created": "2025-12-18T06:15:01.885Z",
		"modified": "2025-12-18T08:50:44.051Z",
		"0.0.0": "2025-12-18T06:15:02.020Z",
		"1.0.0": "2025-12-18T08:50:43.688Z"
	},
	"bugs": {
		"url": "https://github.com/sonofmagic/postcss-plugins/issues"
	},
	"author": {
		"name": "ice breaker",
		"email": "1324318532@qq.com"
	},
	"license": "MIT",
	"homepage": "https://github.com/sonofmagic/postcss-plugins#readme",
	"keywords": [
		"postcss",
		"postcss-plugin",
		"px",
		"rpx",
		"rem",
		"vw",
		"pxtransform"
	],
	"repository": {
		"type": "git",
		"url": "git+https://github.com/sonofmagic/postcss-plugins.git",
		"directory": "packages/postcss-pxtrans"
	},
	"description": "PostCSS plugin that converts px units to rpx/rem/vw/px for multiple platforms.",
	"maintainers": [
		{
			"name": "icebreaker",
			"email": "1324318532@qq.com"
		}
	],
	"readme": "# postcss-pxtrans\n\n[English](./README.md) | 简体中文\n\nPostCSS 单位转换插件（px -> rpx/rem/vw/px），用于多端样式适配。兼容原 `postcss-pxtransform` 配置风格，支持平台指令注释（#ifdef/#ifndef）与 RN eject。\n\n## 安装\n\n```bash\npnpm add -D postcss-pxtrans\n```\n\n## 快速开始\n\n```ts\nimport postcss from 'postcss'\nimport pxTransform from 'postcss-pxtrans'\n\nconst result = await postcss([\n  pxTransform({\n    platform: 'h5',\n    designWidth: 640,\n  }),\n]).process('h1 { margin: 0 0 20px; font-size: 32px; }', { from: undefined })\n\nconsole.log(result.css)\n// h1 { margin: 0 0 0.585rem; font-size: 0.936rem; }\n```\n\n## 预设（platform）\n\n`platform` 可以理解为一组预设，它决定默认的 `targetUnit`、参与转换的单位范围，以及 `rootValue` 的计算方式。你仍然可以通过 `targetUnit`、`rootValue`、`deviceRatio` 等选项覆写预设行为。\n\n### weapp 预设\n\n默认把 `px` 转成 `rpx`，`rpx` 不参与转换。\n\n```ts\npxTransform({ platform: 'weapp', designWidth: 750 })\n// h1 { margin: 20px; } -> h1 { margin: 20rpx; }\n```\n\n可指定 `targetUnit`（`rpx | rem | px | vw | vmin`）：\n\n```ts\npxTransform({ platform: 'weapp', designWidth: 750, targetUnit: 'rem' })\n// 20px -> 0.5rem\n```\n\n默认预设要点：\n\n- `targetUnit`: `rpx`\n- `rootValue`: `1 / deviceRatio[designWidth]`\n\n### h5 预设\n\n默认把 `px` 转成 `rem`，`rpx` 也会参与转换（可用于从小程序样式迁移到 H5）。\n\n```ts\npxTransform({ platform: 'h5', designWidth: 640 })\n// 20px -> 0.585rem\n```\n\n可指定 `targetUnit` 为 `px | vw | vmin | rem`：\n\n```ts\npxTransform({ platform: 'h5', designWidth: 640, targetUnit: 'vw' })\n// 320px -> 50vw\n```\n\n默认预设要点（取决于 `targetUnit`）：\n\n- `targetUnit: 'rem'` -> `rootValue = (baseFontSize / deviceRatio[designWidth]) * 2`\n- `targetUnit: 'vw' | 'vmin'` -> `rootValue = designWidth / 100`\n- `targetUnit: 'px'` -> `rootValue = (1 / deviceRatio[designWidth]) * 2`\n\n### rn 预设\n\n直接转换成 `px`，按设备比例缩放。\n\n```ts\npxTransform({\n  platform: 'rn',\n  designWidth: 750,\n  deviceRatio: { 640: 2.34 / 2, 750: 1, 828: 1.81 / 2 },\n})\n// 100px -> 50px\n```\n\n默认预设要点：\n\n- `targetUnit`: `px`\n- `rootValue`: `(1 / deviceRatio[designWidth]) * 2`\n\n### quickapp 预设\n\n保持 `px` 不变（以 1:1 输出）。\n\n```ts\npxTransform({ platform: 'quickapp', designWidth: 750 })\n// 100px -> 100px\n```\n\n默认预设要点：\n\n- `targetUnit`: `px`\n- `rootValue`: `1`\n\n### harmony 预设\n\n主要规则：\n\n- 普通 `px` 按比例转换为 `px`\n- 大写/混合写法 `PX/Px/pX` 会转为 `ch`\n- `onePxTransform: false` 时，1px 仍会转成 `ch`\n- 命中 `selectorBlackList` 时仍会走 `ch` 路径\n\n```ts\npxTransform({\n  platform: 'harmony',\n  designWidth: 640,\n  deviceRatio: { 640: 2.34 / 2, 750: 1, 828: 1.81 / 2 },\n})\n// 100PX -> 100ch\n```\n\n默认预设要点：\n\n- `targetUnit`: `px`\n- `rootValue`: `1 / deviceRatio[designWidth]`\n\n## 指令注释（平台条件 / 禁用）\n\n指令能力由 `createDirectivePlugin` 提供，需要与主插件一起使用：\n\n```ts\nimport postcss from 'postcss'\nimport pxTransform, { createDirectivePlugin } from 'postcss-pxtrans'\n\nconst result = await postcss([\n  createDirectivePlugin({ platform: 'h5' }),\n  pxTransform({ platform: 'h5', designWidth: 640 }),\n]).process(css, { from: 'input.css' })\n```\n\n支持的指令：\n\n```css\n/*postcss-pxtrans disable*/\n/*  #ifdef  h5  */\n/*  #ifndef  weapp  */\n/*  #endif  */\n```\n\nRN eject：\n\n```css\n/*postcss-pxtrans rn eject enable*/\n.a {\n  width: 10px;\n}\n/*postcss-pxtrans rn eject disable*/\n```\n\n## 选项说明\n\n> 保持 `postcss-pxtransform` 的命名兼容；部分 legacy key 仍可用（如 `root_value`, `unit_precision`）。\n\n- `platform`: `weapp | h5 | rn | quickapp | harmony`（预设），默认 `weapp`\n- `designWidth`: `number | (input) => number`，默认 `750`\n- `targetUnit`: `rpx | rem | px | vw | vmin`（平台相关）\n- `deviceRatio`: `Record<number, number>`，用于按设计宽度映射比例\n- `rootValue`: `number | (input, m, value) => number`，自定义换算基数\n- `baseFontSize`: `number`，仅 `rem`/`h5` 场景下参与计算\n- `minRootSize`: `number`，当未传 `baseFontSize` 时用于兜底\n- `methods`: `['platform', 'size']`，可禁用平台指令或尺寸转换\n- `unitPrecision`: `number`，小数保留位数\n- `selectorBlackList`: `(string | RegExp)[]`，命中则跳过（Harmony 仍会转 `ch`）\n- `propList`: `string[]`，属性白/黑名单（支持通配符与取反）\n- `replace`: `boolean`，`false` 时追加新声明\n- `mediaQuery`: `boolean`，是否转换 `@media` 中的 px\n- `minPixelValue`: `number`，小于该值时不转换（Harmony 仍会转 `ch`）\n- `onePxTransform`: `boolean`，是否转换 1px（Harmony 下 `PX` 仍转 `ch`）\n- `exclude`: `(filePath?: string) => boolean`，命中直接跳过整文件\n\n> 说明：插件内部复用了 `postcss-plugin-shared` 的通用能力（propList 匹配、单位正则构建等）。\n\n## 常见配置场景\n\n### 设计稿宽度按文件动态调整\n\n```ts\npxTransform({\n  platform: 'h5',\n  designWidth(input) {\n    return input.file?.includes('nutui') ? 375 : 750\n  },\n})\n```\n\n### 自定义 rootValue\n\n```ts\npxTransform({\n  platform: 'h5',\n  designWidth: 750,\n  rootValue: 10,\n})\n```\n\n### 只转换部分属性\n\n```ts\npxTransform({\n  platform: 'h5',\n  designWidth: 640,\n  propList: ['*font*', 'margin*', '!margin-left', '*-right', 'pad'],\n})\n```\n\n### 黑名单选择器\n\n```ts\npxTransform({\n  platform: 'h5',\n  designWidth: 640,\n  selectorBlackList: ['.ignore', /^body$/],\n})\n```\n\n### 保留原值并追加转换值\n\n```ts\npxTransform({\n  platform: 'h5',\n  designWidth: 640,\n  replace: false,\n})\n// .rule { font-size: 15px; font-size: 0.43875rem }\n```\n\n### 转换 @media\n\n```ts\npxTransform({\n  platform: 'h5',\n  designWidth: 640,\n  mediaQuery: true,\n})\n```\n\n### 跳过指定文件\n\n```ts\npxTransform({\n  platform: 'h5',\n  designWidth: 750,\n  exclude(filePath) {\n    return filePath === 'skip.css'\n  },\n})\n```\n\n## PostCSS 配置示例\n\n```js\n// postcss.config.cjs\nconst pxTransform = require('postcss-pxtrans')\n\nmodule.exports = {\n  plugins: [\n    pxTransform({ platform: 'weapp', designWidth: 750 }),\n  ],\n}\n```\n\n如需指令注释支持，请同时引入 `createDirectivePlugin` 并放在主插件前：\n\n```js\nconst { createDirectivePlugin } = require('postcss-pxtrans')\n\nmodule.exports = {\n  plugins: [\n    createDirectivePlugin({ platform: 'h5' }),\n    pxTransform({ platform: 'h5', designWidth: 640 }),\n  ],\n}\n```\n",
	"readmeFilename": "README.zh-CN.md",
	"_downloads": [
		0,
		1890,
		2002,
		2262,
		2469,
		2685,
		2787,
		2879,
		2739,
		2784
	]
}