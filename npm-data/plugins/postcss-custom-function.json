{
	"_id": "postcss-custom-function",
	"name": "postcss-custom-function",
	"dist-tags": {
		"latest": "0.0.0"
	},
	"versions": {
		"0.0.0": {
			"name": "postcss-custom-function",
			"version": "0.0.0",
			"type": "module",
			"description": "PostCSS plugin for transforming CSS Custom Function functions to native CSS",
			"repository": {
				"type": "git",
				"url": "git+https://github.com/mfranzke/css-custom-functions-polyfill.git"
			},
			"bugs": {
				"url": "https://github.com/mfranzke/css-custom-functions-polyfill/issues"
			},
			"license": "MIT",
			"main": "dist/index.cjs",
			"types": "dist/index.d.ts",
			"module": "dist/index.modern.js",
			"exports": {
				".": {
					"require": {
						"types": "./dist/index.d.cts",
						"default": "./dist/index.cjs"
					},
					"import": {
						"types": "./dist/index.d.ts",
						"default": "./dist/index.modern.js"
					}
				}
			},
			"keywords": [
				"postcss",
				"postcss-plugin",
				"css",
				"if",
				"media-query",
				"supports",
				"transform"
			],
			"scripts": {
				"build": "microbundle",
				"dev": "microbundle watch",
				"postbuild": "cp dist/index.d.ts dist/index.d.cts",
				"prepublishOnly": "pnpm run build",
				"pretest:vitest": "pnpm run build",
				"test": "pnpm run '/^test:[^:]*$/'",
				"test:vitest": "vitest run",
				"test:vitest:watch": "vitest"
			},
			"peerDependencies": {
				"postcss": "8.0.0"
			},
			"dependencies": {
				"css-custom-functions-polyfill": "0.0.0"
			},
			"devDependencies": {
				"microbundle": "0.15.1",
				"postcss": "8.4.31",
				"vitest": "3.2.4",
				"xo": "1.1.1"
			},
			"source": "src/index.js",
			"umd:main": "dist/index.umd.js",
			"_id": "postcss-custom-function@0.0.0",
			"gitHead": "bbaf2988dc0629ce772a159a29d9b6adfabf4d4f",
			"homepage": "https://github.com/mfranzke/css-custom-functions-polyfill#readme",
			"_nodeVersion": "24.3.0",
			"_npmVersion": "11.4.2",
			"dist": {
				"integrity": "sha512-ltM9xbLuVonNfIlZFC38XDuMGFByqkCDerT5q3XUJ+513BTAImnhn42sTDx/QtzbkQ80GAlIhfjcS2D89mgNHA==",
				"shasum": "21d997b2adb6a556bd3b89933dccffcc603eff9b",
				"tarball": "https://registry.npmjs.org/postcss-custom-function/-/postcss-custom-function-0.0.0.tgz",
				"fileCount": 11,
				"unpackedSize": 31166,
				"signatures": [
					{
						"keyid": "SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U",
						"sig": "MEYCIQDhn/2xZrQj1muIxHE/kaVNQo7Rz2MFd0GXj52vO83MpAIhAN8Kl3o8R6NBi46wSAsAavg9XrlMM0FHJMkzN05ubi6g"
					}
				]
			},
			"_npmUser": {
				"name": "mfranzke",
				"email": "npmjs.com-20200319-mfr@nzke.net"
			},
			"directories": {},
			"maintainers": [
				{
					"name": "mfranzke",
					"email": "npmjs.com-20200319-mfr@nzke.net"
				}
			],
			"_npmOperationalInternal": {
				"host": "s3://npm-registry-packages-npm-production",
				"tmp": "tmp/postcss-custom-function_0.0.0_1753558122882_0.7874405575115169"
			},
			"_hasShrinkwrap": false
		}
	},
	"time": {
		"created": "2025-07-26T19:28:42.881Z",
		"0.0.0": "2025-07-26T19:28:43.067Z",
		"modified": "2025-07-26T19:28:43.305Z"
	},
	"maintainers": [
		{
			"name": "mfranzke",
			"email": "npmjs.com-20200319-mfr@nzke.net"
		}
	],
	"description": "PostCSS plugin for transforming CSS Custom Function functions to native CSS",
	"homepage": "https://github.com/mfranzke/css-custom-functions-polyfill#readme",
	"keywords": [
		"postcss",
		"postcss-plugin",
		"css",
		"if",
		"media-query",
		"supports",
		"transform"
	],
	"repository": {
		"type": "git",
		"url": "git+https://github.com/mfranzke/css-custom-functions-polyfill.git"
	},
	"bugs": {
		"url": "https://github.com/mfranzke/css-custom-functions-polyfill/issues"
	},
	"license": "MIT",
	"readme": "# postcss-custom-function\n\n[![Default CI/CD Pipeline](https://github.com/mfranzke/css-custom-functions-polyfill/actions/workflows/default.yml/badge.svg)](https://github.com/mfranzke/css-custom-functions-polyfill/actions/workflows/default.yml)\n[![npm version](https://badge.fury.io/js/postcss-custom-function.svg)](https://badge.fury.io/js/postcss-custom-function)\n[![Build Status](https://github.com/mfranzke/css-custom-functions-polyfill/workflows/CI/badge.svg)](https://github.com/mfranzke/css-custom-functions-polyfill/actions)\n\nA [PostCSS](https://postcss.org/) plugin for transforming CSS `if()` functions into native CSS `@media` and `@supports` rules at build time.\n\nThis plugin is part of the [css-custom-functions-polyfill](https://github.com/mfranzke/css-custom-functions-polyfill/tree/main/packages/css-custom-functions-polyfill/) project and provides build-time transformation of conditional CSS, eliminating the need for runtime JavaScript processing when using only `media()` and `supports()` functions.\n\n## Installation\n\n```bash\nnpm install postcss-custom-function postcss\n```\n\n## Usage\n\n### PostCSS CLI\n\n```bash\n# Transform CSS using PostCSS CLI\nnpx postcss input.css --output output.css --use postcss-custom-function\n\n# With custom PostCSS config file\nnpx postcss input.css --output output.css --config postcss.config.js\n```\n\n### Basic Programmatic Usage\n\n```js\n// Named export (recommended)\nimport postcss from \"postcss\";\nimport { postcssIfFunction } from \"postcss-custom-function\";\n\n// Or default export (for compatibility)\nimport postcss from \"postcss\";\nimport postcssIfFunction from \"postcss-custom-function\";\n\nconst css = `\n.example {\n  color: if(media(max-width: 768px): blue; else: red);\n  font-size: if(supports(display: grid): 1.2rem; else: 1rem);\n}\n`;\n\nconst result = await postcss([postcssIfFunction()]).process(css, {\n\tfrom: undefined\n});\n\nconsole.log(result.css);\n```\n\n**Output:**\n\n```css\n.example {\n\tcolor: red;\n}\n@media (max-width: 768px) {\n\t.example {\n\t\tcolor: blue;\n\t}\n}\n.example {\n\tfont-size: 1rem;\n}\n@supports (display: grid) {\n\t.example {\n\t\tfont-size: 1.2rem;\n\t}\n}\n```\n\n### With Options\n\n```js\nconst result = await postcss([\n\tpostcssIfFunction({\n\t\tlogTransformations: true,\n\t\tpreserveOriginal: false,\n\t\tskipSelectors: [\".no-transform\"]\n\t})\n]).process(css, { from: undefined });\n```\n\n### With PostCSS Config File\n\n```js\n// postcss.config.js\nimport { postcssIfFunction } from \"postcss-custom-function\";\n\nexport default {\n\tplugins: [\n\t\tpostcssIfFunction({\n\t\t\tlogTransformations: process.env.NODE_ENV === \"development\"\n\t\t})\n\t]\n};\n```\n\n### With Popular PostCSS Tools\n\n#### Vite\n\n```js\n// vite.config.js\nimport { defineConfig } from \"vite\";\nimport { postcssIfFunction } from \"postcss-custom-function\";\n\nexport default defineConfig({\n\tcss: {\n\t\tpostcss: {\n\t\t\tplugins: [\n\t\t\t\tpostcssIfFunction({\n\t\t\t\t\tlogTransformations: process.env.NODE_ENV === \"development\"\n\t\t\t\t})\n\t\t\t]\n\t\t}\n\t}\n});\n```\n\n#### Webpack\n\n```js\n// webpack.config.js\nmodule.exports = {\n\tmodule: {\n\t\trules: [\n\t\t\t{\n\t\t\t\ttest: /\\.css$/,\n\t\t\t\tuse: [\n\t\t\t\t\t\"style-loader\",\n\t\t\t\t\t\"css-loader\",\n\t\t\t\t\t{\n\t\t\t\t\t\tloader: \"postcss-loader\",\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tpostcssOptions: {\n\t\t\t\t\t\t\t\tplugins: [\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\"postcss-custom-function\",\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tlogTransformations: true\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t}\n};\n```\n\n#### Next.js\n\n```js\n// next.config.js\nmodule.exports = {\n\texperimental: {\n\t\tpostcss: {\n\t\t\tplugins: {\n\t\t\t\t\"postcss-custom-function\": {\n\t\t\t\t\tlogTransformations: process.env.NODE_ENV === \"development\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n```\n\n## Options\n\n| Option               | Type       | Default | Description                                                                |\n| -------------------- | ---------- | ------- | -------------------------------------------------------------------------- |\n| `preserveOriginal`   | `boolean`  | `false` | Whether to preserve original CSS alongside transformations (for debugging) |\n| `logTransformations` | `boolean`  | `false` | Whether to log transformation statistics to console                        |\n| `skipSelectors`      | `string[]` | `[]`    | Array of selectors to skip transformation for                              |\n\n## Supported Transformations\n\n### Media Queries\n\n<!-- FIXTURE: basic-media -->\n\n<!-- Note: This content is automatically generated from test fixtures. Do not edit the code blocks directly - they will be overwritten during the build process. To modify test cases, edit the corresponding .input.css and .expected.css files in the test/fixtures/ directory -->\n\n**Input CSS:**\n\n```css\n.responsive {\n\twidth: if(media(max-width: 768px): 100%; else: 50%);\n}\n```\n\n**Expected Output:**\n\n```css\n.responsive {\n\twidth: 50%;\n}\n@media (max-width: 768px) {\n\t.responsive {\n\t\twidth: 100%;\n\t}\n}\n```\n\n<!-- /FIXTURE -->\n\n### Feature Support Queries\n\n<!-- FIXTURE: basic-supports -->\n\n<!-- Note: This content is automatically generated from test fixtures. Do not edit the code blocks directly - they will be overwritten during the build process. To modify test cases, edit the corresponding .input.css and .expected.css files in the test/fixtures/ directory -->\n\n**Input CSS:**\n\n```css\n.grid {\n\tdisplay: if(supports(display: grid): grid; else: block);\n}\n```\n\n**Expected Output:**\n\n```css\n.grid {\n\tdisplay: block;\n}\n@supports (display: grid) {\n\t.grid {\n\t\tdisplay: grid;\n\t}\n}\n```\n\n<!-- /FIXTURE -->\n\n### Multiple Conditions\n\n<!-- FIXTURE: multiple-concatenated-conditions -->\n\n<!-- Note: This content is automatically generated from test fixtures. Do not edit the code blocks directly - they will be overwritten during the build process. To modify test cases, edit the corresponding .input.css and .expected.css files in the test/fixtures/ directory -->\n\n**Input CSS:**\n\n```css\n.responsive {\n\tpadding: if(\n\t\tmedia(width >= 1200px): 40px; media(width >= 768px): 30px;\n\t\t\tmedia(width >= 480px): 20px; else: 15px\n\t);\n}\n```\n\n**Expected Output:**\n\n```css\n.responsive {\n\tpadding: 15px;\n}\n@media (width >= 480px) {\n\t.responsive {\n\t\tpadding: 20px;\n\t}\n}\n@media (width >= 768px) {\n\t.responsive {\n\t\tpadding: 30px;\n\t}\n}\n@media (width >= 1200px) {\n\t.responsive {\n\t\tpadding: 40px;\n\t}\n}\n```\n\n<!-- /FIXTURE -->\n\n## Limitations\n\n- **Style Functions Not Supported**: This plugin only transforms `media()` and `supports()` functions. For `style()` functions (which depend on runtime DOM state), use the [css-custom-functions-polyfill](https://github.com/mfranzke/css-custom-functions-polyfill/tree/main/packages/css-custom-functions-polyfill/) runtime (browser) library\n- **Static Analysis Only**: The plugin performs static analysis and cannot handle dynamically generated CSS\n- **PostCSS Compatibility**: Requires PostCSS 8.0.0 or higher\n\n## Integration with Runtime Polyfill\n\nFor complete CSS `if()` support including `style()` functions, combine this plugin with the runtime polyfill:\n\n1. Use this PostCSS plugin for build-time transformation of `media()` and `supports()`\n2. Use [css-custom-functions-polyfill](https://github.com/mfranzke/css-custom-functions-polyfill/tree/main/packages/css-custom-functions-polyfill/) runtime for `style()` functions\n\n```html\n<!-- For style() functions only -->\n<script src=\"https://cdn.jsdelivr.net/npm/css-custom-functions-polyfill/dist/index.modern.js\"></script>\n```\n\n## Performance Considerations\n\nThis plugin is designed for optimal build-time performance, transforming CSS Custom Function functions to native CSS without runtime overhead. However, there are some architectural considerations:\n\n### Current Implementation\n\n- **Double Parsing**: The plugin currently parses CSS twice - once by PostCSS and once by the transformation engine\n- **String-based Transformation**: The transformation engine outputs CSS strings that are re-parsed into PostCSS AST nodes\n\n### Future Optimization Opportunities\n\n- **Reduced CSS Code**: We'll make use of CSS Nesting capabilities as soon as any of the browsers are EOL ([#35](https://github.com/mfranzke/css-custom-functions-polyfill/issues/35)).\n- **Direct AST Transformation**: The transformation engine could be modified to output PostCSS AST nodes directly, eliminating the double parsing overhead\n- **Streaming Processing**: For very large CSS files, streaming transformation could reduce memory usage\n\nFor most typical usage scenarios, the current performance is excellent and the double parsing overhead is negligible compared to the benefits of build-time transformation.\n\n## Contributing\n\nSee the main [Contributing Guide](https://github.com/mfranzke/css-custom-functions-polyfill/blob/main/CONTRIBUTING.md) for details on how to contribute to this project.\n\n## License\n\nMIT © [Maximilian Franzke](https://github.com/mfranzke)\n\n## Related\n\n- [css-custom-functions-polyfill](https://github.com/mfranzke/css-custom-functions-polyfill/tree/main/packages/css-custom-functions-polyfill/) - Runtime polyfill for CSS Custom Function functions\n- [PostCSS](https://postcss.org/) - Tool for transforming CSS with JavaScript\n- [CSS Conditional Rules](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_conditional_rules) - MDN documentation for @media and @supports\n",
	"readmeFilename": "README.md",
	"_rev": "1-ec09c1aab5e3671d7b078f333e26e6ea",
	"_downloads": 0
}